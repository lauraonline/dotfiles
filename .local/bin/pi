#!/bin/bash

# Determine the image's MIME tyoe
MIME_TYPE=$(wl-paste -l | grep -E '^image/(png|jpeg|gif)' | head -n 1)

if [ -z "$MIME_TYPE" ]; then
    echo "No image found on the clipboard." >&2
    exit 1
fi

mkdir -p "$HOME/Screenshots"

# Determine the file extension
EXTENSION="${MIME_TYPE#image/}"
# Create a unique filename using the current date and time
#
FILENAME="screenshot_$(date +'%Y-%m-%d_%H-%M-%S').$EXTENSION"

# Save the image from the clipboard to the file
wl-paste -t $MIME_TYPE > "$HOME/Screenshots/$FILENAME"

# Optional: Send a notification to confirm the save
echo "Saved as $FILENAME in ~/Screenshots"
